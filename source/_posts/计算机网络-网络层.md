---
title: 计算机网络-网络层
date: 2021-02-28 21:19:55
tags: 计算机网络
categories: 计算机网络
cover: https://jiajuu.top/2021/02/28/计算机网络-网络层/计算机网络-网络层.png
---

>两台主机间的通信的传输过程最高尽到网络层
>
><br>
>
>网络层负责在不同网络中基于数据包中的ip地址转发尽力转发数据包，不负责丢失重传

# 网络层协议

- ARP协议（给IP协议服务）
- IP协议（给ICMP协议服务）
- ICMP协议（给IGMP协议服务）
- IGMP协议

## ARP协议

> 广播获取目的IP的MAC地址
>
> P.S广播只能存在于一个网络，跨不了路由器。

- ARP欺骗

  对方广播询问IP地址时，告知对方这个IP是我，并发送自己的MAC地址，收到数据后再转发给真正的MAC地址



## IP协议

> 路由器自动学习路由表，给数据包选择路径的协议
>
> 例如：RIP协议、OSPF协议都属于IP协议

- 静态路由：管理员手动配置的路由
- 动态路由：由路由器使用IP协议自行学习的路由

### RIP协议

> 动态路由协议

- 根据路由器跳数选择路由
- 路由器会定期（30秒）发送广播路由表
- 跳数少为最优路径
- 最大跳数为15跳，大于15跳则视为不可到达



## ICMP协议

> 网际控制报文协议

- 检测网络层是否由故障（Ping命令底层便是使用ICMP协议）

  Ping命令的小知识：

  - 当我们ping不过去的时候，会显示无法到达
  - 当我们ping过去后，返回不回来时，会显示超时

  > 因为过不去的时候，路由会根据源IP地址返回信息，
  >
  > 返回不回来的时候，因为路由不清楚目的IP地址怎么走，直至超时。



## IGMP协议

- 配置给路由器定期扫描网段中的多播地址
- 多播也叫组播
- 把IP地址统一改成一个多播IP地址，向路由器声明自己是组播组成员（大概就是拉我进群的意思）



# IP数据包

![IP数据包格式](http://jiajuu.top/2021/02/28/计算机网络-网络层/IP数据包格式.jpg)

> - 版本：IPv4/IPv6
> - 区分服务：可以调整数据包的优先级（QoS）
> - 标识：分片的标识，用于区分是否是同一组数据包
> - 标志：区分是否分片
> - 生存时间：TTL
> - 协议：
>   - ICMP：1
>   - IGMP：2
>   - TCP：6
>   - UDP：17
>   - IPv6：41
>
> 首部至少20个字节